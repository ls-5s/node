<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片放大镜效果</title>
    <link rel="stylesheet" href="c.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, sans-serif;
        }

        ul,
        ol {
            list-style: none;
        }

        button,
        input,
        textarea {
            font: inherit;
        }

        .leftTop {
            position: relative;
        }

        .leftTop .small {
            position: relative;
            width: 400px;
            height: 400px;
            border: 1px solid black;
            cursor: pointer;
        }

        .leftTop .small img {
            width: 100%;
            height: 100%;
        }

        .leftTop .small .mask {
            height: 200px;
            width: 200px;
            background-color: rgba(255, 255, 255, 0.5);
            border: 1px solid #ddd;
            position: absolute;
            top: 0px;
            left: 0;
        }

        .mask {
            height: 200px;
            width: 200px;
            background-color: rgba(255, 255, 255, 0.5);
            border: 1px solid #ddd;
            position: absolute;
            top: 0px;
            left: 0;
        }

        .leftTop .big {
            position: absolute;
            left: 420px;
            top: 0;
            width: 400px;
            height: 400px;
            border: 1px solid #ddd;
            top: 0;
            overflow: hidden;
        }

        .leftTop .big .im {
            width: 800px;
            height: 800px;
            position: absolute;
            left: 0px;
            right: 0px;
        }
    </style>
</head>

<body>

    <!-- 放大镜组件容器 -->
    <div class="leftTop">
        <!-- 小图区域：显示原图并响应鼠标事件 -->
        <div class="small">
            <img src="1.jpg" alt="商品缩略图">
            <!-- 遮罩层：跟随鼠标移动，覆盖小图的部分区域 -->
            <div class="mask"></div>
        </div>
        <!-- 大图区域：显示放大后的图片 -->
        <div class="big">
            <img src="1.jpg" alt="商品放大图" class="im">
        </div>
    </div>

    <script>
        // 初始化放大镜功能
        big()

        function big() {
            // 获取DOM元素引用
            const leftTop = document.querySelector('.leftTop')  // 组件容器
            const mask = document.querySelector('.mask')        // 遮罩层
            const big = document.querySelector('.big')          // 大图容器
            const small = document.querySelector('.small')      // 小图容器

            // 初始状态：隐藏遮罩层和大图
            mask.style.display = 'none'
            big.style.display = 'none'

            // 鼠标进入小图区域时触发
            small.addEventListener('mouseenter', () => {
                // 显示遮罩层和大图
                mask.style.display = 'block'
                big.style.display = 'block'

                // 鼠标在小图上移动时更新遮罩层和大图位置
                small.onmousemove = function (event) {
                    // 计算遮罩层相对于小图的位置（鼠标居中）
                    let left = event.clientX - small.getBoundingClientRect().left - mask.offsetWidth / 2;
                    let top = event.clientY - small.getBoundingClientRect().top - mask.offsetWidth / 2;

                    // 边界检查：防止遮罩层超出小图范围
                    const maxLeft = small.offsetWidth - mask.offsetWidth;
                    const maxTop = small.offsetHeight - mask.offsetHeight;

                    // 应用边界限制
                    left = Math.max(0, Math.min(left, maxLeft));
                    top = Math.max(0, Math.min(top, maxTop));

                    // 更新遮罩层位置
                    mask.style.left = left + "px";
                    mask.style.top = top + "px";

                    // 更新大图位置：根据遮罩层移动比例反向移动大图
                    // 实现放大效果（大图尺寸通常是小图的2-3倍）
                    const bigImg = big.querySelector('img');

                    // 计算大图需要移动的距离（与遮罩层移动方向相反）
                    // 使用比例计算确保放大效果正确
                    const scaleX = bigImg.offsetWidth / small.offsetWidth;
                    const scaleY = bigImg.offsetHeight / small.offsetHeight;

                    bigImg.style.left = -left * scaleX + "px";
                    bigImg.style.top = -top * scaleY + "px";
                }
            })

            // 鼠标离开小图区域时触发
            small.addEventListener('mouseleave', () => {
                // 隐藏遮罩层和大图
                mask.style.display = 'none'
                big.style.display = 'none'
            })
        }
    </script>
</body>

</html>