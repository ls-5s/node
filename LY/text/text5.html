<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片放大镜效果</title>
    <link rel="stylesheet" href="c.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, sans-serif;
        }

        ul,
        ol {
            list-style: none;
        }

        button,
        input,
        textarea {
            font: inherit;
        }

        .leftTop {
            position: relative;
        }

        .leftTop .left {
            position: absolute;
            width: 400px;
            height: 400px;
            left: 0;
            top: 0;
        }

        .leftTop .left .img1 {
            position: absolute;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
        }

        .mask1 {
            height: 200px;
            width: 200px;
            background-color: rgba(255, 255, 255, 0.5);
            border: 1px solid #ddd;
            position: absolute;
            top: 0px;
            left: 0;
        }

        .leftTop .z {

            width: 80px;
            height: 400px;
            position: absolute;
            top: 0px;
            left: 410px;
        }

        .leftTop .z li {
            width: 80px;
            height: 80px;
            margin: 20px 0;
            cursor: pointer;
        }

        .leftTop .z li img {
            width: 100%;
            height: 100%;
        }

        .leftTop .right {
            position: absolute;
            width: 400px;
            height: 400px;
            left: 500px;
            top: 0;
            overflow: hidden;
        }

        .leftTop .right .img2 {
            position: absolute;
            width: 800px;
            height: 800px;
            left: 0;
            top: 0;
        }
    </style>
</head>

<body>

    <!-- 放大镜组件容器 -->
    <div class="leftTop">
        <div class="left">
            <img src="img/1.jpg" alt="" class="img1">
            <div class="mask1"></div>
        </div>
        <div class="z">
            <ul>
                <li><img src="img/1.jpg" alt="" class="li-1"></li>
                <li><img src="img/2.jpg" alt="" class="li-2"></li>
                <li><img src="img/3.jpg" alt="" class="li-3"></li>
                <li><img src="img/4.jpg" alt="" class="li-4"></li>
            </ul>
        </div>
        <div class="right">
            <img src="img/1.jpg" alt="" class="img2">
        </div>
    </div>
    <script>
        const li1 = document.querySelector('.li-1')
        const li2 = document.querySelector('.li-2')
        const li3 = document.querySelector('.li-3')
        const li4 = document.querySelector('.li-4')
        const img1 = document.querySelector('.img1')
        const img2 = document.querySelector('.img2')
        const mask = document.querySelector('.mask1')
        const left = document.querySelector('.left')
        const right = document.querySelector('.right')
        li1.addEventListener('mouseenter', () => {
            img1.src = "img/1.jpg"
            img2.src = "img/1.jpg"
        })
        li2.addEventListener('mouseenter', () => {
            img1.src = "img/2.jpg"
            img2.src = "img/2.jpg"
        })
        li3.addEventListener('mouseenter', () => {
            img1.src = "img/3.jpg"
            img2.src = "img/3.jpg"
        })
        li4.addEventListener('mouseenter', () => {
            img1.src = "img/4.jpg"
            img2.src = "img/4.jpg"
        })
        big()

        function big() {

            // 初始状态：隐藏遮罩层和大图
            mask.style.display = 'none'
            right.style.display = 'none'

            // 鼠标进入小图区域时触发
            left.addEventListener('mouseenter', () => {
                // 显示遮罩层和大图
                mask.style.display = 'block'
                right.style.display = 'block'

                // 鼠标在小图上移动时更新遮罩层和大图位置
                left.onmousemove = function (event) {
                    // 计算遮罩层相对于小图的位置（鼠标居中）
                    let left1 = event.clientX - left.getBoundingClientRect().left - mask.offsetWidth / 2;
                    let top1 = event.clientY - left.getBoundingClientRect().top - mask.offsetHeight / 2;

                    // 边界检查：防止遮罩层超出小图范围
                    const maxLeft = left.offsetWidth - mask.offsetWidth;
                    const maxTop = left.offsetHeight - mask.offsetHeight;

                    // 应用边界限制
                    left1 = Math.max(0, Math.min(left1, maxLeft));
                    top1 = Math.max(0, Math.min(top1, maxTop));

                    // 更新遮罩层位置
                    mask.style.left = left1 + "px";
                    mask.style.top = top1 + "px";

                    // 更新大图位置：根据遮罩层移动比例反向移动大图
                    // 实现放大效果（大图尺寸通常是小图的2-3倍）

                    // 计算大图需要移动的距离（与遮罩层移动方向相反）
                    // 使用比例计算确保放大效果正确
                    const scaleX = img2.offsetWidth / left.offsetWidth;
                    const scaleY = img2.offsetHeight / left.offsetHeight;
                    img2.style.left = -left1 * scaleX + "px";
                    img2.style.top = -top1 * scaleY + "px";
                }
            })

            // 鼠标离开小图区域时触发
            left.addEventListener('mouseleave', () => {
                // 隐藏遮罩层和大图
                mask.style.display = 'none'
                right.style.display = 'none'
            })
        }
    </script>
</body>

</html>